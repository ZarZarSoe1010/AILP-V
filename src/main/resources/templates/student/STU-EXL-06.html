<!DOCTYPE html>
<html>

<head th:insert="/student/student-fragments :: student_head">
    <title>Exam</title>
</head>

<body id="page-top" style="background-color: #E4E6E9;">

    <div th:insert="/student/student-fragments :: pc-navbar" />

    <div th:insert="/student/student-fragments :: mobile-navbar" />

    <div class="container mt-4" style="margin-bottom: 50px;">
        <nav>
            <div class="nav nav-fill nav-pills w-50" id="nav-tab" role="tablist">
                <button class="nav-link active fw-bold" id="nav-exam-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-exam" type="button" role="tab" aria-controls="nav-exam"
                    aria-selected="true">Exams</button>
                <button class="nav-link fw-bold" id="nav-codetest-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-codetest" type="button" role="tab" aria-controls="nav-codetest"
                    aria-selected="false">Code Test</button>
            </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade mt-2 show active" id="nav-exam" role="tabpanel" aria-labelledby="nav-exam-tab"
                tabindex="0">
                <!-- Exam Card/ Button Start -->
                <span th:each="bhe : ${bheList}">
                    <div class="btn btn-light ms-0 me-0 my-2 py-3 shadow-sm w-100">
                        <div class="row align-items-center">
                            <div
                                class="align-items-md-start col-12 col-lg-5 col-md-4 col-xl-5 d-flex d-md-flex flex-column justify-content-center justify-content-md-start ps-0 ps-md-4">
                                <h4 class="pt-2"
                                    style="font-weight: 700; color: #3f3f3f;">
                                    [[${bhe?.bheExam?.name}]]</h4>
                                <h6 class="pt-2"
                                    style="font-family: 'Roboto', sans-serif; font-weight: 400; color: #3f3f3f;">
                                    Exam will start at [[${bhe?.startTime}]]</h6>
                            </div>
                            <ul class="align-items-lg-start col-12 col-lg-3 col-md-4 col-xl-3 d-flex d-lg-flex flex-column flex-lg-column gap-2 justify-content-lg-start justify-content-start list-unstyled mb-0 mt-2 my-4 my-md-0 text-90 text-dark-l1 text-left"
                                style="font-size: 17px; color: #636363;">
                                <li> <i class="fa fa-file-text-o mr-2 mt-1 text-110 text-success-m2"
                                        style="margin-right: 8px;"></i> <span> <span
                                            class="text-110">[[${bhe?.bheExam?.questionList.size}]] Questions</span>
                                    </span>
                                </li>
                                <li class="mt-25"> <i class="fa fa-clock-o mr-2 mt-1 text-110 text-success-m2"
                                        style="margin-right: 8px;"></i> <span class="text-110">Duration:
                                        [[${bhe?.totalTime}]]</span>
                                </li>
                                <li class="mt-25"> <i class="fa fa-check text-success-m2 text-110 mr-2 mt-1"
                                        style="margin-right: 8px;"></i> <span
                                        class="text-110">[[${bhe?.bheExam?.fullMark}]]
                                        Marks</span>
                                </li>
                            </ul>
                            <div class="col-12 col-md-4 text-center"> <a href="#"
                                    class="btn bg-gradient btn-raised f-n-hover fw-bold mb-md-0 mt-3 mt-md-0 pe-md-4 ps-md-4 px-4 py-25 shadow-sm text-600 text-light w-75"
                                    style="background-color: #2c4894;" th:href="@{/student/getExam/} + ${bhe.id}">Get
                                    Started</a>
                            </div>
                        </div>
                    </div>
                </span>
            </div>
            <div class="tab-pane fade mt-2" id="nav-codetest" role="tabpanel" aria-labelledby="nav-codetest-tab"
                tabindex="0">

                <div class="container allButFooter" style="margin-top: 22px;padding-right: 10px;padding-left: 10px;">
                    <h2 class="mb-3 me-3 mt-3 text-black-50">File Exam</h2>
                    <div class="card shadow-sm" style="margin-bottom: 85px;">
                        <div class="card-body" style="padding: 10px;">
                            <input type="hidden" th:value="${successMsg}" id="successMsg">
                            <table id="dataTable">
                                <thead>
                                    <tr>
                                        <th>Exam Name</th>
                                        <th>Exam Question</th>
                                        <th>Exam File</th>
                                        <th>Total Mark</th>
                                        <th>Strat Time</th>
                                        <th>End Time</th>
                                        <th>To Upload</th>
                                        <th>Action</th>
                                    </tr>
                                <tbody>

                                    <tr th:each="bhfe : ${bhfeList}">
                                        <form th:action="@{/student/submitFileExam}" th:object="${data}" method="post"
                                            enctype="multipart/form-data">
                                            <input type="hidden" th:value="${successMsg}" id="successMsg">
                                            <td class="pt-2 text-dark">[[${bhfe?.bhfeExam?.name}]]</td>
                                            <td class="pt-2 text-dark">[[${bhfe?.bhfeExam?.question}]]</td>
                                            <td class="pt-2 text-dark">
                                                <a
                                                    th:href="@{ ${'/courses/' + bhfe?.bhfeExam?.fileExamCourse?.name + '/exam/' + bhfe?.bhfeExam?.questionFileName } }">
                                                    [[${bhfe?.bhfeExam?.questionFileName}]]
                                                </a>
                                            </td>
                                            <td class="pt-2 text-dark">[[${bhfe?.bhfeExam?.totalMark}]]</td>
                                            <td class="pt-2 text-dark">[[${bhfe?.startTime}]]</td>
                                            <td class="pt-2 text-dark">[[${bhfe?.endTime}]]</td>
                                            <input type="hidden" th:value="${session?.uid}" th:name="examAnswerStudent"
                                                th:id="examAnswerStudent">
                                            <input type="hidden" th:value="${bhfe.id}" th:name="batchHasFileExam"
                                                th:id="batchHasFileExam">
                                            <td class="pt-1 ">
                                                <input type="file" th:field="*{examAnswerFile}" accept=".zip"
                                                    required />
                                            </td>
                                            <td class="text-dark">
                                                <button class="btn btn-primary mt-3" type="submit">Upload</button>
                                            </td>
                                        </form>
                                    </tr>

                                </tbody>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="hide-on-desktop">
        <a class="border rounded d-inline scroll-to-top" href="#page-top">
            <i class="fas fa-angle-up"></i>
        </a>
    </div>


    <div th:insert="/student/student-fragments :: footer" />
    <script>
        $(document).ready(function () {
            $('#dataTable').DataTable();
        });
    </script>
    <script src="/assets/js/alert.js"></script>
</body>

</html>